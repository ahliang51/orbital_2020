{"ast":null,"code":"var _jsxFileName = \"/Users/lundypang/OneDrive/Self-Learning shit/orbital_2020/web-frontend/src/components/Home/Trade/chart.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport { ChartCanvas, Chart } from \"react-stockcharts\";\nimport { BarSeries, AreaSeries, CandlestickSeries, LineSeries } from \"react-stockcharts/lib/series\";\nimport { XAxis, YAxis } from \"react-stockcharts/lib/axes\";\nimport { CrossHairCursor, CurrentCoordinate, MouseCoordinateX, MouseCoordinateY } from \"react-stockcharts/lib/coordinates\";\nimport { discontinuousTimeScaleProvider } from \"react-stockcharts/lib/scale\";\nimport { OHLCTooltip, MovingAverageTooltip } from \"react-stockcharts/lib/tooltip\";\nimport { ema, wma, sma, tma } from \"react-stockcharts/lib/indicator\";\nimport { fitWidth } from \"react-stockcharts/lib/helper\";\nimport { last } from \"react-stockcharts/lib/utils\";\nconst candlesAppearance = {\n  wickStroke: \"#000000\",\n  fill: function fill(d) {\n    return d.close > d.open ? \"rgba(0, 128, 0, 0.8)\" : \"rgba(255, 0, 0, 0.8)\";\n  },\n  stroke: \"#000000\",\n  candleStrokeWidth: 1,\n  widthRatio: 0.8,\n  opacity: 1\n};\n\nclass CandleStickChartWithMA extends React.Component {\n  render() {\n    const ema20 = ema().options({\n      windowSize: 20,\n      // optional will default to 10\n      sourcePath: \"close\" // optional will default to close as the source\n\n    }).skipUndefined(true) // defaults to true\n    .merge((d, c) => {\n      d.ema20 = c;\n    }) // Required, if not provided, log a error\n    .accessor(d => d.ema20) // Required, if not provided, log an error during calculation\n    .stroke(\"blue\"); // Optional\n\n    const sma20 = sma().options({\n      windowSize: 20\n    }).merge((d, c) => {\n      d.sma20 = c;\n    }).accessor(d => d.sma20);\n    const wma20 = wma().options({\n      windowSize: 20\n    }).merge((d, c) => {\n      d.wma20 = c;\n    }).accessor(d => d.wma20);\n    const tma20 = tma().options({\n      windowSize: 20\n    }).merge((d, c) => {\n      d.tma20 = c;\n    }).accessor(d => d.tma20);\n    const ema50 = ema().options({\n      windowSize: 50\n    }).merge((d, c) => {\n      d.ema50 = c;\n    }).accessor(d => d.ema50);\n    const smaVolume50 = sma().options({\n      windowSize: 20,\n      sourcePath: \"volume\"\n    }).merge((d, c) => {\n      d.smaVolume50 = c;\n    }).accessor(d => d.smaVolume50).stroke(\"#4682B4\").fill(\"#4682B4\");\n    const {\n      type,\n      data: initialData,\n      width,\n      ratio\n    } = this.props;\n    const calculatedData = ema20(sma20(wma20(tma20(ema50(smaVolume50(initialData))))));\n    const xScaleProvider = discontinuousTimeScaleProvider.inputDateAccessor(d => d.date);\n    const {\n      data,\n      xScale,\n      xAccessor,\n      displayXAccessor\n    } = xScaleProvider(calculatedData);\n    const start = xAccessor(last(data));\n    const end = xAccessor(data[Math.max(0, data.length - 150)]);\n    const xExtents = [start, end];\n    return /*#__PURE__*/React.createElement(ChartCanvas, {\n      height: 400,\n      width: width,\n      ratio: ratio,\n      margin: {\n        left: 70,\n        right: 70,\n        top: 10,\n        bottom: 30\n      },\n      type: type,\n      seriesName: \"MSFT\",\n      data: data,\n      xScale: xScale,\n      xAccessor: xAccessor,\n      displayXAccessor: displayXAccessor,\n      xExtents: xExtents,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Chart, {\n      id: 1,\n      yExtents: [d => [d.high, d.low], sma20.accessor(), wma20.accessor(), tma20.accessor(), ema20.accessor(), ema50.accessor()],\n      padding: {\n        top: 10,\n        bottom: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(XAxis, {\n      axisAt: \"bottom\",\n      orient: \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(YAxis, {\n      axisAt: \"right\",\n      orient: \"right\",\n      ticks: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(MouseCoordinateY, {\n      at: \"right\",\n      orient: \"right\",\n      displayFormat: format(\".2f\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CandlestickSeries, Object.assign({}, candlesAppearance, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(LineSeries, {\n      yAccessor: sma20.accessor(),\n      stroke: sma20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(LineSeries, {\n      yAccessor: wma20.accessor(),\n      stroke: wma20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(LineSeries, {\n      yAccessor: tma20.accessor(),\n      stroke: tma20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(LineSeries, {\n      yAccessor: ema20.accessor(),\n      stroke: ema20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(LineSeries, {\n      yAccessor: ema50.accessor(),\n      stroke: ema50.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: sma20.accessor(),\n      fill: sma20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: wma20.accessor(),\n      fill: wma20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: tma20.accessor(),\n      fill: tma20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: ema20.accessor(),\n      fill: ema20.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: ema50.accessor(),\n      fill: ema50.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(OHLCTooltip, {\n      origin: [-40, 0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(MovingAverageTooltip, {\n      onClick: e => console.log(e),\n      origin: [-38, 15],\n      options: [{\n        yAccessor: sma20.accessor(),\n        type: \"SMA\",\n        stroke: sma20.stroke(),\n        windowSize: sma20.options().windowSize,\n        echo: \"some echo here\"\n      }, {\n        yAccessor: wma20.accessor(),\n        type: \"WMA\",\n        stroke: wma20.stroke(),\n        windowSize: wma20.options().windowSize,\n        echo: \"some echo here\"\n      }, {\n        yAccessor: tma20.accessor(),\n        type: \"TMA\",\n        stroke: tma20.stroke(),\n        windowSize: tma20.options().windowSize,\n        echo: \"some echo here\"\n      }, {\n        yAccessor: ema20.accessor(),\n        type: \"EMA\",\n        stroke: ema20.stroke(),\n        windowSize: ema20.options().windowSize,\n        echo: \"some echo here\"\n      }, {\n        yAccessor: ema50.accessor(),\n        type: \"EMA\",\n        stroke: ema50.stroke(),\n        windowSize: ema50.options().windowSize,\n        echo: \"some echo here\"\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Chart, {\n      id: 2,\n      yExtents: [d => d.volume, smaVolume50.accessor()],\n      height: 150,\n      origin: (w, h) => [0, h - 150],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(YAxis, {\n      axisAt: \"left\",\n      orient: \"left\",\n      ticks: 5,\n      tickFormat: format(\".2s\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(MouseCoordinateX, {\n      at: \"bottom\",\n      orient: \"bottom\",\n      displayFormat: timeFormat(\"%Y-%m-%d\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(MouseCoordinateY, {\n      at: \"left\",\n      orient: \"left\",\n      displayFormat: format(\".4s\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(BarSeries, {\n      yAccessor: d => d.volume,\n      fill: d => d.close > d.open ? \"#6BA583\" : \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(AreaSeries, {\n      yAccessor: smaVolume50.accessor(),\n      stroke: smaVolume50.stroke(),\n      fill: smaVolume50.fill(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: smaVolume50.accessor(),\n      fill: smaVolume50.stroke(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n      yAccessor: d => d.volume,\n      fill: \"#9B0A47\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(CrossHairCursor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nCandleStickChartWithMA.propTypes = {\n  data: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired,\n  ratio: PropTypes.number.isRequired,\n  type: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired\n};\nCandleStickChartWithMA.defaultProps = {\n  type: \"svg\"\n};\nCandleStickChartWithMA = fitWidth(CandleStickChartWithMA);\nexport default CandleStickChartWithMA;","map":{"version":3,"sources":["/Users/lundypang/OneDrive/Self-Learning shit/orbital_2020/web-frontend/src/components/Home/Trade/chart.js"],"names":["React","PropTypes","format","timeFormat","ChartCanvas","Chart","BarSeries","AreaSeries","CandlestickSeries","LineSeries","XAxis","YAxis","CrossHairCursor","CurrentCoordinate","MouseCoordinateX","MouseCoordinateY","discontinuousTimeScaleProvider","OHLCTooltip","MovingAverageTooltip","ema","wma","sma","tma","fitWidth","last","candlesAppearance","wickStroke","fill","d","close","open","stroke","candleStrokeWidth","widthRatio","opacity","CandleStickChartWithMA","Component","render","ema20","options","windowSize","sourcePath","skipUndefined","merge","c","accessor","sma20","wma20","tma20","ema50","smaVolume50","type","data","initialData","width","ratio","props","calculatedData","xScaleProvider","inputDateAccessor","date","xScale","xAccessor","displayXAccessor","start","end","Math","max","length","xExtents","left","right","top","bottom","high","low","e","console","log","yAccessor","echo","volume","w","h","propTypes","array","isRequired","number","oneOf","defaultProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\n\nimport { ChartCanvas, Chart } from \"react-stockcharts\";\nimport {\n  BarSeries,\n  AreaSeries,\n  CandlestickSeries,\n  LineSeries,\n} from \"react-stockcharts/lib/series\";\nimport { XAxis, YAxis } from \"react-stockcharts/lib/axes\";\nimport {\n  CrossHairCursor,\n  CurrentCoordinate,\n  MouseCoordinateX,\n  MouseCoordinateY,\n} from \"react-stockcharts/lib/coordinates\";\n\nimport { discontinuousTimeScaleProvider } from \"react-stockcharts/lib/scale\";\nimport {\n  OHLCTooltip,\n  MovingAverageTooltip,\n} from \"react-stockcharts/lib/tooltip\";\nimport { ema, wma, sma, tma } from \"react-stockcharts/lib/indicator\";\nimport { fitWidth } from \"react-stockcharts/lib/helper\";\nimport { last } from \"react-stockcharts/lib/utils\";\n\nconst candlesAppearance = {\n    wickStroke: \"#000000\",\n    fill: function fill(d) {\n      return d.close > d.open ? \"rgba(0, 128, 0, 0.8)\" : \"rgba(255, 0, 0, 0.8)\";\n    },\n    stroke: \"#000000\",\n    candleStrokeWidth: 1,\n    widthRatio: 0.8,\n    opacity: 1,\n}\n\nclass CandleStickChartWithMA extends React.Component {\n  render() {\n    const ema20 = ema()\n      .options({\n        windowSize: 20, // optional will default to 10\n        sourcePath: \"close\", // optional will default to close as the source\n      })\n      .skipUndefined(true) // defaults to true\n      .merge((d, c) => {d.ema20 = c;}) // Required, if not provided, log a error\n      .accessor(d => d.ema20) // Required, if not provided, log an error during calculation\n      .stroke(\"blue\"); // Optional\n\n    const sma20 = sma()\n      .options({ windowSize: 20 })\n      .merge((d, c) => {d.sma20 = c;})\n      .accessor(d => d.sma20);\n\n    const wma20 = wma()\n      .options({ windowSize: 20 })\n      .merge((d, c) => {d.wma20 = c;})\n      .accessor(d => d.wma20);\n\n    const tma20 = tma()\n      .options({ windowSize: 20 })\n      .merge((d, c) => {d.tma20 = c;})\n      .accessor(d => d.tma20);\n\n    const ema50 = ema()\n      .options({ windowSize: 50 })\n      .merge((d, c) => {d.ema50 = c;})\n      .accessor(d => d.ema50);\n\n    const smaVolume50 = sma()\n      .options({ windowSize: 20, sourcePath: \"volume\" })\n      .merge((d, c) => {d.smaVolume50 = c;})\n      .accessor(d => d.smaVolume50)\n      .stroke(\"#4682B4\")\n      .fill(\"#4682B4\");\n\n    const { type, data: initialData, width, ratio } = this.props;\n\n    const calculatedData = ema20(sma20(wma20(tma20(ema50(smaVolume50(initialData))))));\n    const xScaleProvider = discontinuousTimeScaleProvider\n      .inputDateAccessor(d => d.date);\n    const {\n      data,\n      xScale,\n      xAccessor,\n      displayXAccessor,\n    } = xScaleProvider(calculatedData);\n\n    const start = xAccessor(last(data));\n    const end = xAccessor(data[Math.max(0, data.length - 150)]);\n    const xExtents = [start, end];\n\n    return (\n      <ChartCanvas height={400}\n        width={width}\n        ratio={ratio}\n        margin={{ left: 70, right: 70, top: 10, bottom: 30 }}\n        type={type}\n        seriesName=\"MSFT\"\n        \n        data={data}\n        xScale={xScale}\n        xAccessor={xAccessor}\n        displayXAccessor={displayXAccessor}\n        xExtents={xExtents}\n      >\n        <Chart id={1}\n          yExtents={[d => [d.high, d.low], sma20.accessor(), wma20.accessor(), tma20.accessor(), ema20.accessor(), ema50.accessor()]}\n          padding={{ top: 10, bottom: 20 }}\n        >\n          <XAxis axisAt=\"bottom\" orient=\"bottom\"/>\n          <YAxis axisAt=\"right\" orient=\"right\" ticks={5} />\n\n          <MouseCoordinateY\n            at=\"right\"\n            orient=\"right\"\n            displayFormat={format(\".2f\")} />\n<CandlestickSeries {...candlesAppearance} />\n          <LineSeries yAccessor={sma20.accessor()} stroke={sma20.stroke()}/>\n          <LineSeries yAccessor={wma20.accessor()} stroke={wma20.stroke()}/>\n          <LineSeries yAccessor={tma20.accessor()} stroke={tma20.stroke()}/>\n          <LineSeries yAccessor={ema20.accessor()} stroke={ema20.stroke()}/>\n          <LineSeries yAccessor={ema50.accessor()} stroke={ema50.stroke()}/>\n          <CurrentCoordinate yAccessor={sma20.accessor()} fill={sma20.stroke()} />\n          <CurrentCoordinate yAccessor={wma20.accessor()} fill={wma20.stroke()} />\n          <CurrentCoordinate yAccessor={tma20.accessor()} fill={tma20.stroke()} />\n          <CurrentCoordinate yAccessor={ema20.accessor()} fill={ema20.stroke()} />\n          <CurrentCoordinate yAccessor={ema50.accessor()} fill={ema50.stroke()} />\n\n          <OHLCTooltip origin={[-40, 0]}/>\n          <MovingAverageTooltip\n            onClick={e => console.log(e)}\n            origin={[-38, 15]}\n            options={[\n              {\n                yAccessor: sma20.accessor(),\n                type: \"SMA\",\n                stroke: sma20.stroke(),\n                windowSize: sma20.options().windowSize,\n                echo: \"some echo here\",\n              },\n              {\n                yAccessor: wma20.accessor(),\n                type: \"WMA\",\n                stroke: wma20.stroke(),\n                windowSize: wma20.options().windowSize,\n                echo: \"some echo here\",\n              },\n              {\n                yAccessor: tma20.accessor(),\n                type: \"TMA\",\n                stroke: tma20.stroke(),\n                windowSize: tma20.options().windowSize,\n                echo: \"some echo here\",\n              },\n              {\n                yAccessor: ema20.accessor(),\n                type: \"EMA\",\n                stroke: ema20.stroke(),\n                windowSize: ema20.options().windowSize,\n                echo: \"some echo here\",\n              },\n              {\n                yAccessor: ema50.accessor(),\n                type: \"EMA\",\n                stroke: ema50.stroke(),\n                windowSize: ema50.options().windowSize,\n                echo: \"some echo here\",\n              },\n            ]}\n          />\n        </Chart>\n        <Chart id={2}\n          yExtents={[d => d.volume, smaVolume50.accessor()]}\n          height={150} origin={(w, h) => [0, h - 150]}\n        >\n          <YAxis axisAt=\"left\" orient=\"left\" ticks={5} tickFormat={format(\".2s\")}/>\n\n          <MouseCoordinateX\n            at=\"bottom\"\n            orient=\"bottom\"\n            displayFormat={timeFormat(\"%Y-%m-%d\")} />\n          <MouseCoordinateY\n            at=\"left\"\n            orient=\"left\"\n            displayFormat={format(\".4s\")} />\n\n          <BarSeries yAccessor={d => d.volume} fill={d => d.close > d.open ? \"#6BA583\" : \"red\"} />\n          <AreaSeries yAccessor={smaVolume50.accessor()} stroke={smaVolume50.stroke()} fill={smaVolume50.fill()}/>\n          <CurrentCoordinate yAccessor={smaVolume50.accessor()} fill={smaVolume50.stroke()} />\n          <CurrentCoordinate yAccessor={d => d.volume} fill=\"#9B0A47\" />\n        </Chart>\n        <CrossHairCursor />\n      </ChartCanvas>\n    );\n  }\n}\n\nCandleStickChartWithMA.propTypes = {\n  data: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired,\n  ratio: PropTypes.number.isRequired,\n  type: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired,\n};\n\nCandleStickChartWithMA.defaultProps = {\n  type: \"svg\",\n};\nCandleStickChartWithMA = fitWidth(CandleStickChartWithMA);\n\nexport default CandleStickChartWithMA;"]},"metadata":{},"sourceType":"module"}